<!DOCTYPE html>
<html ng-app="litApp">
<head>
    <title>Literature App</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="styles/bootstrap.css" rel="stylesheet" type="text/css">
    <link href="styles/main.css" rel="stylesheet" type="text/css">
    <!-- AngularJS -->
    <script src="vendor/angular.js" type="text/javascript"></script>
    <!-- Firebase -->
    <script src="https://cdn.firebase.com/js/client/2.2.4/firebase.js"></script>
    <!-- AngularFire -->
    <script src="https://cdn.firebase.com/libs/angularfire/1.1.3/angularfire.min.js"></script>
</head>
<body ng-controller="mainCtrl">
<div class="container">
    {{data}}
    <!--Navigation Menu-->

    <!--Search Bar-->
    <div class="row">
        <div class="col-sm-10" id="search-box">
            <input ng-model="query"
                   class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2"
                   placeholder="Search a publisher ">
        </div>
    </div>
    <!--Publisher List-->
    <div class="row">
        <div class="col-sm-12">
            <h3>Publishers <small>Tap a name to select</small></h3>
        </div>
        <div class="col-sm-10 col-sm-offset-1 interior-content-center">
            <div ng-repeat="user in data.users | filter:query | orderBy:[fname, lname]"
                 ng-init="hasPendingItems=hasPendingItems(user)"
                 class="col-xs-12 publishers-container">
                <!--Publisher Name-->
                <div class="col-xs-12  publisher-name"
                     ng-click="nameSelected=!nameSelected; selectPub(user, nameSelected);
                                cancelAllReceivingMonths(); removed=false"
                     ng-class="{hasPending: hasPendingItems}">
                    {{user.fname | uppercase}} {{ user.lname | uppercase}} {{getMonthsBehindCount(user)}}
                </div>
                <!--Publisher Order // Hidden until name selected-->
                <div class="col-xs-12 primaryText interior-content-left order-details" ng-show="isSelectedPub(user)">
                    <div class="col-xs-12">
                        <span class="pull-right"><a href="">Customize Order</a></span>
                        <div class="row" ng-show="hasPendingItems">
                            <div class="col-xs-12" >
                                <h4>New Items: <small>tap an item to remove it</small></h4></div>
                            </div>
                        </div>
                    <div>
                        <div class="row" ng-hide="hasPendingItems">
                            <div class="col-xs-12 interior-content-center" >
                                <h4>No New Items!</h4>
                            </div>
                        </div>
                        <br>
                    </div>

                    <div class="col-xs-12">
                        <br>
                        <div ng-repeat="item in getAllItems(user)">
                            <div ng-repeat="month in monthsNotReceived(item.months_received)"
                                 class="col-sm-5 col-sm-offset-1 interior-content-center itemBlock"
                                 ng-click="queueReceiveMonth(item.name, item.language, month)">

                                <div ng-show="!inQueue(item.name, item.language, month)">
                                    {{monthName(month)}}
                                    {{item.name}}
                                    ({{item.count}}) {{showIfForeignLanguage(item.language)}}
                                </div>
                                <div ng-show="inQueue(item.name, item.language, month)">
                                    Marked received. Touch to undo.
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <button class="col-xs-4 col-xs-offset-4 btn btn-default finished-btn"
                                ng-click="nameSelected=!nameSelected; $parent.finalizeReceiveMonth(user)">
                            Save</button>
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>

<script src="scripts/app.js" type="text/javascript"></script>
<script src="scripts/controllers.js" type="text/javascript"></script>
<script src="scripts/services.js" type="text/javascript"></script>
</body>
</html>